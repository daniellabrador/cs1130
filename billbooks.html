<!DOCTYPE html>
<html lang="US">
<head>
  <!-- PAGE META -->
    <!-- Title:         BillBooks -->
    <!-- Description:   BillBooks is a simple pseudo-payroll application that accepts sets of input as objects representing the employees and their corresponding net pay and displays these entries in a table. -->
    <!-- Limitations:   The program does not have a permanent storage system. So, the data will be wiped out when the webpage  is refreshed. -->
    <!-- Purpose:       This project seeks to emphasize the use of JavaScript arrays and objects. -->
    <!-- Link Shortcut: -->
  
  <!-- DETAILS -->
  <title>BillBooks | CS 1130 Projects</title>
  <meta name="author" content="Daniel Labrador">
  <meta name="description" content="BillBooks is a simple pseudo-payroll application that accepts sets of input as objects representing the employees and their corresponding net pay and displays these entries in a table.">

  <!-- DISPLAY -->
  <link rel="stylesheet" type="text/css" href="./src/sass/index.css">
  <link rel="shortcut icon" href="./src/img/logo/favicon.ico" type="image/x-icon">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="keywords" content="computer science, html, javascript, js, college">
  <meta name="theme-color" content="#000000"/>

  <!-- OTHER SCRIPTS -->
  <script src="https://kit.fontawesome.com/ba3abb2535.js" crossorigin="anonymous"></script>
  <script src="./src/script/jquery.min.js" defer></script>
  <script src="./src/script/boilerplate.js" defer></script>
  <script src="./src/script/index.js" defer></script>
</head>

<body>
  <!-------------- HEADER -----------------><header><div class="nav-bar" id="nav-bar"><div class="mobile-menu nav-bar-element" id="mobile-menu-open"><span class="noselect"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"><style>path {fill: #fff}</style><g fill="var(--color-default)"><path d="M8 14h7a1 1 0 000-2H8a1 1 0 000 2zM1 4h14a1 1 0 000-2H1a1 1 0 000 2zM1 9h14a1 1 0 000-2H1a1 1 0 000 2z"></path></g></svg> </span> </div> <div class="main-navigation-items"> <div id="main-logo-container" class="main-logo-container nav-bar-element"> <span class="main-logo-text noselect">Daniel Labrador</span> <a href="http://daniellabrador.com" class = "main-logo-link"> <img id="main-logo" src="./src/img/logo/SVG/logo-light.svg" alt="Brand logo" class="main-logo mobile"> </a> </div> <nav class="desktop-nav" aria-label="Desktop"> <ul> <a href="https://daniellabrador.com/cs1130"> <li>Home</li> </a> <a href="./conversion"> <li>Conversion</li> </a> <a href="./nitrotax"> <li>NitroTax</li> </a> <a href="./loopify"> <li>Loopify</li> </a> <a href="./billbooks"> <li>BillBooks</li> </a> </ul> </nav> </div> <div class="social nav-bar-element"> <a href="https://go.daniellabrador.com/instagram"> <div class="social-icon"> <i class="fab fa-instagram"></i> </div> </a> <a href="https://go.daniellabrador.com/linkedin"> <div class="social-icon"> <i class="fab fa-linkedin-in"></i> </div> </a> <a href="https://github.com/daniellabrador"> <div class="social-icon"> <i class="fab fa-github"></i> </div> </a> </div> </div> <!-- To prevent reference error, I have to create this class --> <div class="clear-nav-bar" style="display:none"></div> <nav class="mobile-nav" id="mobile-nav" aria-label="Mobile"> <div class="social"> <a href="https://go.daniellabrador.com/instagram"> <div class="social-icon"> <i class="fab fa-instagram"></i> </div> </a> <a href="https://go.daniellabrador.com/linkedin"> <div class="social-icon"> <i class="fab fa-linkedin-in"></i> </div> </a> <a href="https://github.com/daniellabrador"> <div class="social-icon"> <i class="fab fa-github"></i> </div> </a> </div> <hr> <ul> <a href="https://daniellabrador.com/cs1130"> <li>Home</li> </a> <a href="./conversion"> <li>Conversion</li> </a> <a href="./nitrotax"> <li>NitroTax</li> </a> <a href="./loopify"> <li>Loopify</li> </a> <a href="./billbooks"> <li>BillBooks</li> </a> </ul> <div class="mobile-menu-close"><span class="noselect">Close</span><div id='mobile-menu-close'></div></div> </nav> </header>
  
  <!---------------  MAIN  ------------------>
  <main><section class="col-grid">
    <div class="description col-span-12">
      <h1>BillBooks</h1>
      <p>BillBooks is a simple pseudo-payroll application that accepts sets of input as objects representing the employees and their corresponding net pay and displays these entries in a table. This project seeks to emphasize the use of JavaScript arrays and objects. See <a href="http://github.com/daniellabrador/cs1130/">source code</a>.</p>
      <p>This application also requires a minimum of 1600px screen width to be viewed properly. If the program does not fit to your screen, please zoom out. Also, the input you submit will not be stored and will be wiped out when you close or refresh the page.</p>
    </div>
    <div id="app-window" class="col-span-12"><div id="app-header-design"><div></div><div></div><div></div><p class="noselect">BillBooks</p></div><div id="app-container" class="payroll"><div id="app"><div id="payroll">




      <!--!--------------- APP WINDOW AND SCRIPT STARTS HERE ------------------>

      <!--TODO: APPLICATION FORM -->
      <section id="control-panel">
        <nav aria-label="app-nav"><div id="billbooks-logo"><p>B</p></div><h2>BillBooks</h2></nav>

        <!-- Payroll Form -->
        <form class="billbooks" id="payroll-form">
          <label for="payroll-name">Employee Name
            <input type="text" id="payroll-name" name="payroll-name" placeholder="John Doe" required>
          </label>
          <label for="payroll-days">Days Worked
            <input type="number" id="payroll-days" name="payroll-days" placeholder="#" step="0.01" required>
          </label>
          <label for="payroll-rate">Daily Rate
            <input type="number" id="payroll-rate" name="payroll-rate" placeholder="₱" step="0.01" required>
          </label>
          <label for="payroll-deduction">Deduction Amount
            <input type="number" id="payroll-deduction" name="payroll-deduction" placeholder="₱" step="0.01" required>
          </label>
          <button type="submit" id="payroll-add-entry">Add Entry</button>
        </form>

        <hr>

        <!-- Deletion Form -->
        <form class="billbooks" id="payroll-delete">
          <label for="payroll-id">Delete Entry No.
            <input type="number" id="payroll-id" name="payroll-id" placeholder="No." required>
          </label>
          <button type="submit" id="payroll-remove-entry">Remove Entry</button>
        </form>

        <form class="billbooks" id="payroll-delete-all">
          <button type="submit" id="payroll-remove-all">Clear All</button>
        </form>

      </section>
      <section class="display">
        <table id="payroll-table">
          <caption>Current Payroll</caption>
          <thead>
            <tr>
              <th>No.</th>
              <th>Employee Name</th>
              <th>Days Worked</th>
              <th>Daily Rate</th>
              <th>Gross Pay</th>
              <th>Deduction Amount</th>
              <th id="billbooks-net-pay">Net Pay</th>
            </tr>
          </thead>
          <tbody id="payroll-table-body">
          </tbody>
        </table>
      </section>

      <!--TODO: JAVASCRIPT CALCULATION AND DOM MANIPULATION -->
      <script>        
        // ACCESS HTML ELEMENTS
        const payrollForm = document.getElementById('payroll-form');
        const payrollDelete = document.getElementById('payroll-delete');
        const payrollDeleteAll = document.getElementById('payroll-delete-all');
        const payrollTable = document.getElementById('payroll-table');
        const payrollTableBody = document.getElementById('payroll-table-body');

        // DISPLAY AS CURRENCY WITHOUT THE SIGN
        const addComma = number => {
          return number.toLocaleString('en', { 
            minimumFractionDigits: 2,
            maximumFractionDigits: 2 
          });;
        }

        // INITIALIZE VARIABLES
        let payrollEntries = [];
        
        // ADD ENTRY
        payrollForm.addEventListener('submit', event => {
          event.preventDefault();
          const payrollName = document.getElementById('payroll-name').value;
          const payrollDays = document.getElementById('payroll-days').value;
          const payrollRate = document.getElementById('payroll-rate').value;
          const payrollDeduction = document.getElementById('payroll-deduction').value;
          const payrollGrossPay = payrollDays * payrollRate;
          const payrollNetPay = payrollGrossPay - payrollDeduction;
          const payrollEntry = {
            name: payrollName,
            days: payrollDays,
            rate: payrollRate,
            deduction: payrollDeduction,
            grossPay: payrollGrossPay,
            netPay: payrollNetPay
          };
          payrollEntries.push(payrollEntry);
          payrollForm.reset();
          payrollTableBody.innerHTML = '';
          payrollEntries.forEach((entry, index) => {
            const row = document.createElement('tr');
            row.innerHTML = `
              <td>${index + 1}</td>
              <td>${entry.name}</td>
              <td>${entry.days}</td>
              <td>${addComma(entry.rate)}</td>
              <td>${addComma(entry.grossPay)}</td>
              <td>${addComma(entry.deduction)}</td>
              <td>₱${addComma(entry.netPay)}</td>
            `;
            payrollTableBody.appendChild(row);
          });
        });

        // REMOVE ENTRY
        payrollDelete.addEventListener('submit', event => {
          event.preventDefault();
          const payrollId = document.getElementById('payroll-id').value;
          payrollEntries.splice(payrollId - 1, 1);
          payrollDelete.reset();
          payrollTableBody.innerHTML = '';
          payrollEntries.forEach((entry, index) => {
            const row = document.createElement('tr');
            row.innerHTML = `
              <td>${index + 1}</td>
              <td>${entry.name}</td>
              <td>${entry.days}</td>
              <td>${addComma(entry.rate)}</td>
              <td>${addComma(entry.grossPay)}</td>
              <td>${addComma(entry.deduction)}</td>
              <td>₱${addComma(entry.netPay)}</td>
            `;
            payrollTableBody.appendChild(row);
          });
        });

        // REMOVE ALL
        payrollDeleteAll.addEventListener('submit', event => {
          event.preventDefault();
          const actionConfirmed = confirm('Are you sure you want to clear all entries?')

          if (actionConfirmed) {
            payrollEntries = [];
            payrollTableBody.innerHTML = '';
          }
        });
      </script>

      <!--!---------------- APP WINDOW AND SCRIPT ENDS HERE ------------------->




    </div></div></div></div>
  </section></main>
  
  <!-------------- FOOTER -----------------> <footer> <p class="copyright">&copy; <a href="https://daniellabrador.com">Thony Danielle Labrador</a> 2022. All Rights Reserved.</p> <div class="social"> <a href="https://go.daniellabrador.com/instagram"> <div class="social-icon"> <i class="fab fa-instagram"></i> </div> </a> <a href="https://go.daniellabrador.com/linkedin"> <div class="social-icon"> <i class="fab fa-linkedin-in"></i> </div> </a> <a href="https://github.com/daniellabrador"> <div class="social-icon"> <i class="fab fa-github"></i> </div> </a> </div> </footer></body>
</html>