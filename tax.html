<!DOCTYPE html>
<html lang="US">
<head>
  <!-- PAGE META -->
    <!-- Title:         NitroTax -->
    <!-- Description:   NitroTax is a tax calculator application that is designed to compute the income tax of a given net taxable income based on the graduated income tax table of the TRAIN law. -->
    <!-- Limitations:   NitroTax is a conversion tool for temperature and length units. This tool is only limited to the Philippine peso (₱). -->
    <!-- Purpose:       This project is intended to emphasize the use of conditional statements using JavaScript syntax. -->
    <!-- Link Shortcut: -->
  
  <!-- DETAILS -->
  <title>NitroTax | CS 1130 Projects</title>
  <meta name="author" content="Daniel Labrador">
  <meta name="description" content="NitroTax is a tax calculator application that is designed to compute the income tax of a given net taxable income based on the graduated income tax table of the TRAIN law.">

  <!-- DISPLAY -->
  <link rel="stylesheet" type="text/css" href="./src/sass/index.css">
  <link rel="shortcut icon" href="./src/img/logo/favicon.ico" type="image/x-icon">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="keywords" content="computer science, html, javascript, js, college">
  <meta name="theme-color" content="#000000"/>

  <!-- OTHER SCRIPTS -->
  <script src="https://kit.fontawesome.com/ba3abb2535.js" crossorigin="anonymous"></script>
  <script src="./src/script/jquery.min.js" defer></script>
  <script src="./src/script/boilerplate.js" defer></script>
  <script src="./src/script/index.js" defer></script>
</head>

<body>
  <!-------------- HEADER -----------------><header><div class="nav-bar" id="nav-bar"><div class="mobile-menu nav-bar-element" id="mobile-menu-open"><span class="noselect"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"><style>path {fill: #fff}</style><g fill="var(--color-default)"><path d="M8 14h7a1 1 0 000-2H8a1 1 0 000 2zM1 4h14a1 1 0 000-2H1a1 1 0 000 2zM1 9h14a1 1 0 000-2H1a1 1 0 000 2z"></path></g></svg> </span> </div> <div class="main-navigation-items"> <div id="main-logo-container" class="main-logo-container nav-bar-element"> <span class="main-logo-text noselect">Daniel Labrador</span> <a href="http://daniellabrador.com" class = "main-logo-link"> <img id="main-logo" src="./src/img/logo/SVG/logo-light.svg" alt="Brand logo" class="main-logo mobile"> </a> </div> <nav class="desktop-nav" aria-label="Desktop"> <ul> <a href="https://daniellabrador.com/cs1130"> <li>Home</li> </a> <a href="./conversion"> <li>Conversion</li> </a> <a href="./tax"> <li>Tax</li> </a> <a href="./calculator"> <li>Calculator</li> </a> <a href="./payroll"> <li>Payroll</li> </a> </ul> </nav> </div> <div class="social nav-bar-element"> <a href="https://go.daniellabrador.com/instagram"> <div class="social-icon"> <i class="fab fa-instagram"></i> </div> </a> <a href="https://go.daniellabrador.com/linkedin"> <div class="social-icon"> <i class="fab fa-linkedin-in"></i> </div> </a> <a href="https://github.com/daniellabrador"> <div class="social-icon"> <i class="fab fa-github"></i> </div> </a> </div> </div> <!-- To prevent reference error, I have to create this class --> <div class="clear-nav-bar" style="display:none"></div> <nav class="mobile-nav" id="mobile-nav" aria-label="Mobile"> <div class="social"> <a href="https://go.daniellabrador.com/instagram"> <div class="social-icon"> <i class="fab fa-instagram"></i> </div> </a> <a href="https://go.daniellabrador.com/linkedin"> <div class="social-icon"> <i class="fab fa-linkedin-in"></i> </div> </a> <a href="https://github.com/daniellabrador"> <div class="social-icon"> <i class="fab fa-github"></i> </div> </a> </div> <hr> <ul> <a href="https://daniellabrador.com/cs1130"> <li>Home</li> </a> <a href="./conversion"> <li>Conversion</li> </a> <a href="./tax"> <li>Tax</li> </a> <a href="./calculator"> <li>Calculator</li> </a> <a href="./payroll"> <li>Payroll</li> </a> </ul> <div class="mobile-menu-close"><span class="noselect">Close</span><div id='mobile-menu-close'></div></div> </nav> </header>
  
  <!---------------  MAIN  ------------------>
  <main><section class="col-grid">
    <div class="description col-span-12">
      <h1>NitroTax</h1>
      <p>NitroTax is a tax calculator application that is designed to compute the income tax of a given net taxable income based on the graduated income tax table of the TRAIN law. This tool is only limited to the Philippine peso (₱). This project is intended to emphasize the use of conditional statements using JavaScript syntax. See <a href="http://github.com/daniellabrador/cs1130/">source code</a>.</p>
      <p>This application requires a minimum of 600px screen width to be viewed properly (mobile phone on landscape works).</p>
    </div>
    <div id="app-window" class="col-span-12"><div id="app-header-design"><div></div><div></div><div></div><p class="noselect">NitroTax</p></div><div id="app-container"><div id="app">


      <!--!--------------- APP WINDOW AND SCRIPT STARTS HERE ------------------>
      <!--TODO: APPLICATION FORM -->
      <form id="nitrotax">

        <!-- Taxable Income Input Field -->
        <div id="income" class="calculator">
          <div id="taxable-income-container">
            <input type="number" name="taxable-income" id="taxable-income" value="0">
            <label for="taxable-income">Taxable Income (₱)</label>
          </div>
          
          <p class="equals">=</p>

          <div id="income-tax-container">
            <input type="text" name="income-tax" id="income-tax" disabled>
            <label for="income-tax">Income Tax (₱)</label>
          </div>

          <div class="formula">
            <p class="label" id="formula-text">Formula</p>
            <p class="equation" id="income-equation"></p>
          </div>
        </div>
        
      </form>

      <!--TODO: JAVASCRIPT CALCULATION AND DOM MANIPULATION -->
      <script>
        // ACCESS HTML ELEMENTS
        const income  = document.getElementById("income")
        const taxableIncome  = document.getElementById("taxable-income")
        const incomeTax  = document.getElementById("income-tax")
        const incomeEquation = document.getElementById("income-equation")

        // SET DEFAULT VALUES
        income.style.display = "grid"
        incomeEquation.innerHTML = `(<strong>Taxable Income</strong> - Deduction) x Rate + Fixed = <strong>Income Tax</strong>`
        incomeTax.value = 0

        // GENERAL TAXATION EQUATION
        const computeGeneralTax = (_income, _excessOf, _rate, _fixed) => {
          return ((_income - _excessOf) * _rate + _fixed).toFixed(2)
        }

        // ADD COMMA
        const addComma = value => {
          return value.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
        }

        // COMPUTE TAX 
        const computeTax = (event) => {
          // Get form values
          const incomeValue = event.target.value
          let excessOf, rate, fixed, error;
          // incomeEquation.innerHTML = `(<strong>${incomeValue*1}°C</strong> × 9/5) + 32 = <strong>${incomeTaxValue}°F</strong>`

          // Set the values
          switch (true){
            case incomeValue <= 250000:
              excessOf = 0;
              rate = 0;
              fixed = 0;
              break;
            case incomeValue <= 400000:
              excessOf = 250000;
              rate = 0.20;
              fixed = 0;
              break;
            case incomeValue <= 800000:
              excessOf = 400000;
              rate = 0.25;
              fixed = 30000;
              break;
            case incomeValue <= 2000000:
              excessOf = 800000;
              rate = 0.30;
              fixed = 130000;
              break;
            case incomeValue <= 8000000:
              excessOf = 2000000;
              rate = 0.32;
              fixed = 490000;
              break;
            case incomeValue > 8000000:
              excessOf = 8000000;
              rate = 0.35;
              fixed = 2410000;
              break;
            default:
              error = "Error! Please contact the developer.";
              throw("Error! Please contact the developer.")
          }

          let incomeTaxValue = computeGeneralTax(incomeValue, excessOf, rate, fixed)
          incomeTax.value = addComma(incomeTaxValue)
          incomeEquation.innerHTML = error || `(₱${addComma(incomeValue*1)} - ${addComma(excessOf)}) x ${rate * 100}% + ${addComma(fixed)} = <strong>₱${addComma(incomeTaxValue)}</strong>`

          if (incomeValue === ''){
            incomeEquation.innerHTML = '(<strong>Taxable Income</strong> - Deduction) x Rate + Fixed = <strong>Income Tax</strong>'
          }

          if (incomeValue >= 100000000){
            document.getElementById('formula-text').style.display = 'none';
          } else {
            document.getElementById('formula-text').style.display = 'inline-block';
          }
        }

        // HIDE FORMULA TEXT IF NUMBER IS TOO BIG


        // ADD EVENT LISTENERS
        taxableIncome.addEventListener("keyup", computeTax)

      </script>

      <!--!---------------- APP WINDOW AND SCRIPT ENDS HERE ------------------->




    </div></div></div>
  </section></main>
  
  <!-------------- FOOTER -----------------> <footer> <p class="copyright">&copy; <a href="https://daniellabrador.com">Thony Danielle Labrador</a> 2022. All Rights Reserved.</p> <div class="social"> <a href="https://go.daniellabrador.com/instagram"> <div class="social-icon"> <i class="fab fa-instagram"></i> </div> </a> <a href="https://go.daniellabrador.com/linkedin"> <div class="social-icon"> <i class="fab fa-linkedin-in"></i> </div> </a> <a href="https://github.com/daniellabrador"> <div class="social-icon"> <i class="fab fa-github"></i> </div> </a> </div> </footer></body>
</html>